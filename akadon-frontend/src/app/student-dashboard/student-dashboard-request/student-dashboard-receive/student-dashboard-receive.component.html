<div class="request-main">
  <div class="filters mt-4 mb-4 pt-3">
    <ul>
      <li class="filter">
        <mat-form-field
          appearance="fill"
          class="example-form-field"
          style="height: 25px"
        >
          <mat-label>Ngày cập nhật</mat-label>
          <mat-date-range-input [rangePicker]="rangePicker" [formGroup]="range">
            <input
              matStartDate
              placeholder="Start date"
              formControlName="start"
            />
            <input matEndDate placeholder="End date" formControlName="end" />
          </mat-date-range-input>
          <mat-datepicker-toggle
            matSuffix
            [for]="rangePicker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #rangePicker>
            <mat-date-range-picker-actions>
              <button
                mat-button
                matDateRangePickerCancel
                class="btn btn-primary bg-danger"
                style="border: none; font-size: 14px; font-weight: 500"
              >
                Hủy
              </button>
              <button
                style="
                  border: none;
                  margin-left: 10px;
                  font-size: 14px;
                  font-weight: 500;
                "
                class="btn btn-primary bg-info"
                mat-raised-button
                color="primary"
                matDateRangePickerApply
              >
                Lọc
              </button>
            </mat-date-range-picker-actions>
          </mat-date-range-picker>
        </mat-form-field>
      </li>
      <li
        class="form-control filter"
        (click)="showCheckbox($event)"
        id="subject"
      >
        <span>Môn học</span>
        <i class="fas fa-filter" style="font-size: 13px"></i>
        <div class="checkbox" id="subjectCheckbox">
          <div class="checkbox-area" *ngFor="let subject of subjectData">
            <input
              type="checkbox"
              name="subject"
              id="{{ subject.subjectName }}"
              [value]="subject.subjectName"
              class="id-{{ subject.subjectId }}"
            />
            <label for="{{ subject.subjectName }}">{{
              subject.subjectName
            }}</label>
          </div>
        </div>
      </li>
      <li class="form-control filter" (click)="showCheckbox($event)" id="level">
        <span>Trình độ</span>
        <i class="fas fa-filter" style="font-size: 13px"></i>
        <div class="checkbox" id="levelCheckbox">
          <div class="checkbox-area" *ngFor="let level of levelData">
            <input
              type="checkbox"
              name="level"
              id="{{ level.levelName }}"
              [value]="level.levelName"
              class="id-{{ level.levelId }}"
            />
            <label for="{{ level.levelName }}">{{ level.levelName }}</label>
          </div>
        </div>
      </li>
      <li class="form-control filter" (click)="showCheckbox($event)" id="cost">
        <span>Ngân sách</span>
        <i class="fas fa-filter" style="font-size: 13px"></i>
        <div class="checkbox" id="costCheckbox">
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="smaller-100"
              value="< {{ 100000 | number }} VNĐ"
            />
            <label for="smaller-100">< {{ 100000 | number }} VNĐ</label>
          </div>
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="100-to-200"
              value="{{ 100000 | number }} - {{ 200000 | number }} VNĐ"
            />
            <label for="100-to-200"
              >{{ 100000 | number }} - {{ 200000 | number }} VNĐ</label
            >
          </div>
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="200-to-300"
              value="{{ 200000 | number }} - {{ 300000 | number }} VNĐ"
            />
            <label for="200-to-300"
              >{{ 200000 | number }} - {{ 300000 | number }} VNĐ</label
            >
          </div>
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="300-to-400"
              value="{{ 300000 | number }} - {{ 400000 | number }} VNĐ"
            />
            <label for="300-to-400"
              >{{ 300000 | number }} - {{ 400000 | number }} VNĐ</label
            >
          </div>
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="400-to-500"
              value="{{ 400000 | number }} - {{ 500000 | number }} VNĐ"
            />
            <label for="400-to-500"
              >{{ 400000 | number }} - {{ 500000 | number }} VNĐ</label
            >
          </div>
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="500-to-600"
              value="{{ 500000 | number }} - {{ 600000 | number }} VNĐ"
            />
            <label for="500-to-600"
              >{{ 500000 | number }} - {{ 600000 | number }} VNĐ</label
            >
          </div>
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="600-to-700"
              value="{{ 600000 | number }} - {{ 700000 | number }} VNĐ"
            />
            <label for="600-to-700"
              >{{ 600000 | number }} - {{ 700000 | number }} VNĐ</label
            >
          </div>
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="700-to-800"
              value="{{ 700000 | number }} - {{ 800000 | number }} VNĐ"
            />
            <label for="700-to-800"
              >{{ 700000 | number }} - {{ 800000 | number }} VNĐ</label
            >
          </div>
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="800-to-900"
              value="{{ 800000 | number }} - {{ 900000 | number }} VNĐ"
            />
            <label for="800-to-900"
              >{{ 800000 | number }} - {{ 900000 | number }} VNĐ</label
            >
          </div>
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="900-to-1000"
              value="900,000 - 1000,000 VNĐ"
            />
            <label for="800-to-900"
              >{{ 900000 | number }} - {{ 1000000 | number }} VNĐ</label
            >
          </div>
          <div class="checkbox-area">
            <input
              type="checkbox"
              name="cost"
              id="bigger-1000"
              value="> 1,000,000"
            />
            <label for="bigger-1000">> {{ 1000000 | number }} VNĐ</label>
          </div>
        </div>
      </li>
      <li>
        <button (click)="filter()" class="filter">Lọc</button>
        <button (click)="reset()" class="reset">Bỏ lọc</button>
      </li>
    </ul>
  </div>
  <p class="filter-result mt-4 mb-4">
    <span class="mr-2">Kết quả lọc của:</span><span class="filterrr"></span>
  </p>
  <p
    *ngIf="studentRequest.length === 0"
    style="color: red; font-weight: 600; padding: 0px 60px"
  >
    Không tìm thấy kết quả nào
  </p>
  <div id="main-save">
    <div class="request-info">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Ngày tạo</th>
            <th scope="col">Môn học</th>
            <th scope="col">Trình độ</th>
            <th scope="col">Thời lượng</th>
            <th scope="col">Học phí / tiếng</th>
            <th scope="col">Trạng thái</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let request of studentRequest">
            <td>{{ request.createdDate | date: "dd/MM/yyyy" }}</td>
            <td>{{ request.objSubject?.subjectName }}</td>
            <td>{{ request.objLevel?.levelName }}</td>
            <td>{{ request.durationPerSession | timeTransform }}</td>
            <td>{{ request.costPerHour | number }} VNĐ</td>
            <td *ngIf="request.status">{{ request.status }}</td>
            <td style="display: flex; justify-content: center">
              <button
                class="view"
                data-toggle="modal"
                data-target="#exampleModal"
                id="request-{{ request.studentRequestId }}"
                (click)="viewRequest($event)"
              >
                <i class="fas fa-eye"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <mat-paginator
        [length]="length"
        [pageSize]="pageSize"
        [pageIndex]="pageIndex"
        [pageSizeOptions]="[5, 10, 20]"
        (page)="pageEvent = getPaginatorData($event)"
      >
      </mat-paginator>
    </div>
  </div>
</div>

<!-- Modal -->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <p class="modal-title" id="exampleModalLabel">Gia sư yêu cầu</p>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="request-list">
          <div class="request" *ngFor="let course of courseList">
            <a
              routerLink="/dashboard-student/request/tutor-request-detail/{{
                course.objTutorRequest?.tutorRequestId
              }}"
              target="_blank"
              style="
                display: flex;
                align-items: center;
                justify-content: space-between;
                color: unset;
                width: 85%;
                text-decoration: none;
              "
            >
              <div class="request-content" style="width: 70%">
                <div class="receiveDate mr-3">
                  <p style="font-weight: 600">Ngày gửi:</p>
                  <p>{{ course?.createdDate | date: "dd/MM/yyyy" }}</p>
                </div>
                <img
                  src="http://localhost:8888/upload/images/{{
                    course.objStudentRequest?.objSubject?.subjectImage
                  }}"
                  alt=""
                />
                <div class="info ml-3">
                  <p class="request-title mb-2" style="font-size: 14px">
                    <span class="normal">Thời gian học:</span>
                    {{ course?.startTime | date: "HH:mm" }} -
                    {{ course?.endTime | date: "HH:mm" }}
                    <span
                      class="normal"
                      style="
                        border-left: 1px solid rgba(0, 0, 0, 0.404);
                        padding-left: 5px;
                      "
                      >Ngày học thử:</span
                    >
                    {{ course?.objTutorRequest?.testDate | date: "dd/MM/yyyy" }}
                  </p>
                  <p class="request-title mb-2" style="font-size: 14px">
                    <span class="normal">Ngày học:</span>
                    {{ course?.studyDate | learningDateTransform }}
                  </p>
                  <div class="subject-info">
                    <div
                      class="subject pr-2 mb-2"
                      style="border-right: 1px solid rgba(0, 0, 0, 0.404)"
                    >
                      <span class="normal"
                        >Ngày bắt đầu:
                        <span class="bold">{{
                          course?.startDate | date: "dd/MM/yyyy"
                        }}</span></span
                      >
                    </div>
                    <div class="subject pr-2 mb-2 ml-2">
                      <span class="normal"
                        >Ngày kết thúc:
                        <span class="bold">{{
                          course?.endDate | date: "dd/MM/yyyy"
                        }}</span></span
                      >
                    </div>
                  </div>
                </div>
              </div>

              <div class="request-student" style="width: 30%">
                <img
                  src="http://localhost:8888/upload/images/{{
                    course?.objTutorRequest?.objTutor?.image
                  }}"
                  alt=""
                  class="mr-3"
                />
                <div class="student-info">
                  <p class="student-name mb-2" style="font-weight: 600">
                    {{ course?.objTutorRequest?.objTutor?.fullName }}
                  </p>
                  <div class="vote ml-2">
                    <div class="active-star">
                      <i
                        class="fas fa-star mb-1"
                        style="color: #ccc"
                        *ngFor="let i of [].constructor(5)"
                      ></i>
                    </div>

                    <div class="disable-star">
                      <i
                        class="fas fa-star mt-1"
                        style="color: #ff6d34"
                        *ngFor="
                          let i of [].constructor(
                            course?.objTutorRequest?.objTutor?.rating
                          )
                        "
                      ></i>
                    </div>
                  </div>
                </div>
              </div>
            </a>
            <div class="actions">
              <button
                type="button"
                class="btn btn-info mr-2"
                data-toggle="modal"
                data-target="#acceptRequest"
                (click)="accept($event)"
                id="tutorRequest-{{ course.courseId }}"
              >
                Đồng ý
              </button>
              <button
                class="btn btn-danger"
                (click)="deleteRequest($event)"
                id="tutorRequest-{{ course.courseId }}"
              >
                Xóa
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Đóng
        </button>
      </div>
    </div>
  </div>
</div>
